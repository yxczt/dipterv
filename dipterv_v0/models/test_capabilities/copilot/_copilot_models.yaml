version: 2

models:
  - name: stg_part_copilot
    description: >
      This staging model represents the parts data from the tpch source.
      It includes the following dimensions: part_id, part_name, manufacturer, brand, type, size, container, retail_price, comment.
    columns:
      - name: part_id
        description: The unique identifier for each part.
        tests:
          - unique
          - not_null
      - name: part_name
        description: The name of the part.
        tests:
          - not_null
      - name: manufacturer
        description: The manufacturer of the part.
        tests:
          - not_null
      - name: brand
        description: The brand of the part.
        tests:
          - not_null
      - name: type
        description: The type of the part.
        tests:
          - not_null
      - name: size
        description: The size of the part.
        tests:
          - not_null
      - name: container
        description: The container of the part.
        tests:
          - not_null
      - name: retail_price
        description: The retail price of the part.
        tests:
          - not_null
      - name: comment
        description: Additional comments about the part.

  - name: stg_orders_copilot
    description: >
      This staging model represents the orders data from the tpch source.
      It includes the following dimensions: order_id, customer_id, order_status, total_price, order_date, order_priority, clerk, ship_priority, comment.
    columns:
      - name: order_id
        description: The unique identifier for each order.
        tests:
          - unique
          - not_null
      - name: customer_id
        description: The unique identifier for the customer who placed the order.
        tests:
          - not_null
      - name: order_status
        description: The status of the order.
        tests:
          - not_null
      - name: total_price
        description: The total price of the order.
        tests:
          - not_null
      - name: order_date
        description: The date when the order was placed.
        tests:
          - not_null
      - name: order_priority
        description: The priority of the order.
        tests:
          - not_null
      - name: clerk
        description: The clerk who processed the order.
        tests:
          - not_null
      - name: ship_priority
        description: The shipping priority of the order.
        tests:
          - not_null
      - name: comment
        description: Additional comments about the order.

  - name: stg_customer_copilot
    description: >
      This staging model represents the customer data from the tpch source.
      It includes the following dimensions: customer_id, name, address, nation_id, phone, account_balance, market_segment, comment.
    columns:
      - name: customer_id
        description: The unique identifier for each customer.
        tests:
          - unique
          - not_null
      - name: name
        description: The name of the customer.
        tests:
          - not_null
      - name: address
        description: The address of the customer.
        tests:
          - not_null
      - name: nation_id
        description: The unique identifier for the nation of the customer.
        tests:
          - not_null
      - name: phone
        description: The phone number of the customer.
        tests:
          - not_null
      - name: account_balance
        description: The account balance of the customer.
        tests:
          - not_null
      - name: market_segment
        description: The market segment of the customer.
        tests:
          - not_null
      - name: comment
        description: Additional comments about the customer.

  - name: int_avg_revenue_per_customer_order_copilot
    description: >
      This model represents the average revenue per customer order.
      It includes the following dimensions: customer_id, total_revenue, avg_revenue_per_order.
    columns:
      - name: customer_id
        description: The unique identifier for each customer.
        tests:
          - unique
          - not_null
      - name: total_revenue
        description: The total revenue generated by the customer.
        tests:
          - not_null
      - name: avg_revenue_per_order
        description: The average revenue per order for the customer.
        tests:
          - not_null
  - name: int_lineitem_revenue_copilot
    description: >
      This model represents the total revenue per customer by region.
      It includes the following dimensions: region_id, customer_id, total_revenue.
    columns:
      - name: region_id
        description: The unique identifier for each region.
        tests:
          - not_null
      - name: customer_id
        description: The unique identifier for each customer.
        tests:
          - not_null
      - name: max_revenue
        description: The maximum revenue generated by the customer in the region.
        tests:
          - not_null
  - name: int_lineitem_sold_per_customer_copilot
    description: >
      This model represents the number of line items bought by each customer.
      It includes the following dimensions: customer_id, lineitems_bought.
    columns:
      - name: customer_id
        description: The unique identifier for each customer.
        tests:
          - unique
          - not_null
      - name: lineitems_bought
        description: The number of line items bought by the customer.
        tests:
          - not_null

  - name: mart_order_revenue_copilot
    description: >
      This model aggregates order data to calculate total revenue for each order by customer, part, and supplier.
      It includes the following dimensions: order_id, customer_id, customer_name, market_segment, part_id, part_name, supplier_id, supplier_name, total_revenue.
    columns:
      - name: order_id
        description: The unique identifier for each order.
        tests:
          - unique
          - not_null
      - name: customer_id
        description: The unique identifier for each customer.
        tests:
          - not_null
      - name: customer_name
        description: The name of the customer.
        tests:
          - not_null
      - name: market_segment
        description: The market segment of the customer.
        tests:
          - not_null
      - name: part_id
        description: The unique identifier for each part.
        tests:
          - not_null
      - name: part_name
        description: The name of the part.
        tests:
          - not_null
      - name: supplier_id
        description: The unique identifier for each supplier.
        tests:
          - not_null
      - name: supplier_name
        description: The name of the supplier.
        tests:
          - not_null
      - name: total_revenue
        description: The total revenue generated from each order.
        tests:
          - not_null

  - name: mart_customer_data_copilot
    description: >
      This model aggregates customer data by nations and regions with various dimensions.
      It includes the following dimensions: customer_id, customer_name, market_segment, nation_name, region_name, number_of_orders, total_revenue.
    columns:
      - name: customer_id
        description: The unique identifier for each customer.
        tests:
          - unique
          - not_null
      - name: customer_name
        description: The name of the customer.
        tests:
          - not_null
      - name: market_segment
        description: The market segment of the customer.
        tests:
          - not_null
      - name: nation_name
        description: The name of the nation.
        tests:
          - not_null
      - name: region_name
        description: The name of the region.
        tests:
          - not_null
      - name: number_of_orders
        description: The number of orders placed by the customer.
        tests:
          - not_null
      - name: total_revenue
        description: The total revenue generated from the customer's orders.
        tests:
          - not_null
  - name: mart_sold_parts_by_region_with_date_copilot
    description: >
      This model aggregates sold parts data by region and date with various dimensions.
      It includes the following dimensions: region_name, date, part_id, part_name, number_of_parts_sold, total_quantity, total_revenue.
    columns:
      - name: region_name
        description: The name of the region.
        tests:
          - not_null
      - name: date
        description: The date of the order.
        tests:
          - not_null
      - name: part_id
        description: The unique identifier for each part.
        tests:
          - not_null
      - name: part_name
        description: The name of the part.
        tests:
          - not_null
      - name: number_of_parts_sold
        description: The number of distinct parts sold.
        tests:
          - not_null
      - name: total_quantity
        description: The total quantity of parts sold.
        tests:
          - not_null
      - name: total_revenue
        description: The total revenue generated from the sold parts.
        tests:
          - not_null